@model IEnumerable<PMS.Features.ProjectTask.ViewModels.ProjectTaskViewModel>

<div class="row">
	<div class="col-xs-12">
		<div class="box">
			<div class="box-body">
				<table id="documentTable" class="table table-bordered table-striped">
					<thead>
						<tr>
							<th>Task Code</th>
							<th>Task Name</th>
							<th>Priority</th>
							<th>Type Info</th>
							<th>Due Date </th>
							<th>Assign To</th>
							<th>Task Status</th>
							<th>Action</th>
							
							
						</tr>
					</thead>
					<tbody>
						@foreach (var item in Model)
						{
							<tr>
								<td>
									<a asp-controller="Project" asp-action="GetProjectDetail" asp-route-id="@item.Id">@item.TaskCode</a>
								</td>
								<td>@item.TaskName</td>
								<td>@item.TaskPriority</td>
								<td>@item.TaskType</td>
								<td>@item.DueDate?.ToString("yyyy-MM-dd")</td>
								<td>@item.EmployeeName</td>
								<td>@item.TaskStatus</td>

								<td>
									<a asp-action="Index" asp-route-id="@item.Id" asp-controller="ProjectTask" class="btn btn-success" title="Edit">
										<i class="fa fa-edit"></i>
									</a>
									<a href="#" class="btn btn-danger" title="Delete" onclick="confirmDelete('@item.Id')">
										<i class="fa fa-trash"></i>
									</a>

								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>




<script>

	var projectId=0
	var status=''

	$(document).ready(function () {
			setTimeout(function () {
				$('#documentTable').DataTable({
					"paging": true,
					"lengthChange": true,
					"searching": true,
					"ordering": true,
					"info": true,
					"autoWidth": false,
					"responsive": true,
					"scrollY": "450px",
					"scrollCollapse": true
				});
			}, 1000); 
	});

	function confirmDelete(id) {
		confirmAction({
			title: 'Delete Record',
			text: 'Are you sure you want to delete this records?',
			confirmText: 'Yes, delete it!',
			cancelText: 'No, keep it'
		}).then((result) => {
			if (result.isConfirmed) {
				$.get('/Features/ProjectTask/DeleteProjectTask', {id:id},function(resp){
					toastr.success("Deleted successfully!");
					fn_ProjectList();
					hideLoader();
				});
			}
		});
	}
</script>





