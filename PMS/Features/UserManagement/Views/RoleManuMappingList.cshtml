@model IEnumerable<PMS.Features.UserManagement.ViewModels.RoleMenuMappingVm>

<div class="row">
    <div class="col-xs-12">
        <div class="box">
            <div class="box-body">
                <table id="documentTable" class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>Menu Name</th>
                            <th>SubMenu Name</th>
                            <th>Is Mapped</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var menu in Model.GroupBy(m => m.MenuName))
                        {
                            <tr class="menu-row" data-menu="@menu.Key">
                                <td>
                                    <button class="btn btn-xs btn-primary toggle-submenu">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                    @menu.Key
                                </td>
                                <td colspan="2"></td>
                            </tr>

                            @foreach (var sub in menu)
                            {
                                <tr class="submenu-row" data-parent="@menu.Key" style="display:none;">
                                    <td></td>
                                    <td>@sub.SubMenuName</td>
                                    <td>
                                        <input onchange="fn_ChangeRoleMenumapping('@menu.First().Id', this)" type="checkbox" @(sub.IsMapped ? "checked" : "") />
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


    <script>
        $(document).ready(function () {
            // Toggle submenu rows
            $('#documentTable').on('click', '.toggle-submenu', function () {
                var $btn = $(this);
                var menuName = $btn.closest('tr').data('menu');
                var $subRows = $('tr.submenu-row[data-parent="' + menuName + '"]');

                if ($subRows.is(':visible')) {
                    $subRows.hide();
                    $btn.find('i').removeClass('fa-minus').addClass('fa-plus');
                } else {
                    $subRows.show();
                    $btn.find('i').removeClass('fa-plus').addClass('fa-minus');
                }
            });
        });
    </script>



<script>


	function confirmDelete(id) {
		confirmAction({
			title: 'Delete Record',
			text: 'Are you sure you want to delete this records?',
			confirmText: 'Yes, delete it!',
			cancelText: 'No, keep it'
		}).then((result) => {
			if (result.isConfirmed) {
				$.get('/Features/UserManagement/DeleteEmployee', {id:id},function(resp){
					toastr.success("Deleted successfully!");
					fn_EmployeeList();
					hideLoader();
				});
			}
		});
	}
</script>





