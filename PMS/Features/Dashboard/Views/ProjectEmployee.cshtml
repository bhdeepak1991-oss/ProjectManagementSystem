@model IEnumerable<PMS.Features.UserManagement.ViewModels.EmployeeViewModel>

	<style>
	.users-list > li{
		width: 25% !important;
	}
</style>

@functions {
	// Generate a consistent color from project name
	string GetProjectColor(string input)
	{
		int hash = input.GetHashCode();
		byte r = (byte)((hash & 0xFF0000) >> 16);
		byte g = (byte)((hash & 0x00FF00) >> 8);
		byte b = (byte)(hash & 0x0000FF);

		// Brighten color
		r = (byte)((r + 200) / 2);
		g = (byte)((g + 200) / 2);
		b = (byte)((b + 200) / 2);

		return $"#{r:X2}{g:X2}{b:X2}";
	}

	// Determine text color (black or white) based on background brightness
	string GetTextColor(string hex)
	{
		hex = hex.Replace("#", "");
		int r = Convert.ToInt32(hex.Substring(0, 2), 16);
		int g = Convert.ToInt32(hex.Substring(2, 2), 16);
		int b = Convert.ToInt32(hex.Substring(4, 2), 16);
		int brightness = (r * 299 + g * 587 + b * 114) / 1000;
		return brightness > 160 ? "#000000" : "#FFFFFF"; // black if bright, else white
	}

}

<div class='col-md-7'>
	<!-- USERS LIST -->
	<div class="box box-danger">
		<div class="box-header with-border">
			<h3 class="box-title">Team Members</h3>
			<div class="box-tools pull-right">
				<span class="label label-danger">@Model.Count() Assign Members in this Project</span>
				<button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
				<button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
			</div>
		</div><!-- /.box-header -->
		<div class="box-body no-padding">
			<ul class="users-list clearfix">
				@foreach (var data in Model)
				{
					var name = data?.Name?.Split('(')[0] ?? "Super Admin";
					var colorHex = GetProjectColor(name);
					var textColor = GetTextColor(colorHex);
					var colorHexForUrl = colorHex.Replace("#", "");
					
					<li>
						<img src="https://ui-avatars.com/api/?name=@(@data.Name)&size=64&background=@colorHexForUrl&color=fff"
							 alt="User Image"
							 style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;" />
						<a class="users-list-name" href="#">@data.Name (@data.EmployeeCode)</a>
						<span class="users-list-date">@data.DesignationName (@data.DepartmentName)</span>
					</li>
				}

			</ul>
		</div>
	</div>
</div>